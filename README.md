# Прототип Кликера

**Платформа:** Android  
**Движок:** Unity 2022+  
**Архитектура:** LeoEcs / LeoEcsLite

---

## Архитектура проекта

### Компоненты архитектуры

#### Системы (Systems)
- **SpawnBusinessSystem** — система инициализации бизнесов:
  - Создает и настраивает бизнес-сущности.
  - Инициализирует все компоненты для каждого бизнеса.
  - Управляет UI элементами через `BusinessView`.
  - Работает с конфигурацией через `ConfigHandler`.

#### Представления (Views)
- **BusinessView** — UI-представление бизнеса:
  - Содержит все UI элементы (кнопки, тексты, слайдеры).
  - Обрабатывает пользовательский ввод.
  - Создает события для систем (`UpgradeEventComponent`, `LvlUpEventComponent`).
  - Обновляет UI в соответствии с состоянием бизнеса.

#### Компоненты (Components)
Основные компоненты, используемые в системе:
- **BusinessComponent** — базовые параметры бизнеса (ID, задержка дохода, базовая стоимость, базовый доход).
- **LevelComponent** — уровень бизнеса.
- **Upgrade1Component**, **Upgrade2Component** — компоненты улучшений.
- **IncomeComponent** — расчет дохода.
- **ProgressComponent** — прогресс до следующего дохода.
- **LvlUpComponent** — параметры повышения уровня.
- **UpgradeEventComponent**, **LvlUpEventComponent** — события улучшений.

### Конфигурация
- Используется `BusinessConfigSO` для хранения конфигурации бизнесов.
- `ConfigHandler` управляет загрузкой и доступом к конфигурации.

### Сохранение данных
- Используется `PlayerPrefs` для сохранения:
  - Уровней бизнесов.
  - Состояния улучшений.
  - Денег игрока.

---

## Архитектурные особенности

- Чистое разделение данных (компоненты) и логики (системы).
- Событийная система для обработки пользовательского ввода.
- MVVM-подобный подход с разделением представления (`BusinessView`) и данных.
- Использование ECS для управления состоянием игры.
- Конфигурируемость через `ScriptableObjects`.

---

## Поток данных

1. Пользователь взаимодействует с UI (`BusinessView`).
2. `BusinessView` создает соответствующие события.
3. Системы обрабатывают события и обновляют компоненты.
4. `BusinessView` обновляет UI в соответствии с новым состоянием компонентов.

---

## Преимущества архитектуры

- **Масштабируемость** — легко добавлять новые бизнесы и улучшения.
- **Тестируемость** — разделение логики и представления.
- **Поддержка** — чистая структура кода.
- **Производительность** — оптимизированная работа с ECS.

